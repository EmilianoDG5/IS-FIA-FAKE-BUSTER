<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Feed â€“ FakeBuster</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>

<header>
    <div class="header">
        <div class="logo">
        <img src="{{ url_for('static', filename='img/logo_fakebuster.png') }}" height="40">
        <h1>FakeBuster</h1>
    </div>

        <nav>
            {{ username }}
            <a href="/new_post">Nuovo Post</a>
            <a href="/my_posts">I miei post</a>
            <a href="/logout">Logout</a>
        </nav>
    </div>
</header>

<main class="container">
{% for post in posts %}
<div class="post">

    <!-- AUTORE -->
    <div class="post-header">
        <strong>@{{ post.autore.username }}</strong>
    </div>

    <h3>{{ post.titolo }}</h3>
    {% if post.img_url %}
        <img src="{{ url_for('static',
            filename='uploads/posts/' ~ post.img_url) }}"
            class="post-img">
    {% endif %}
    <p>{{ post.testo }}</p>

    <small>Score IA: {{ post.ai_score }}</small>

    {% if post.account_id != session["user_id"] %}
        <button class="danger"
                onclick="openSegnalaPopup({{ post.id }})">
            Segnala
        </button>
    {% endif %}
    </div>
{% else %}
    <p>Nessun post disponibile</p>
{% endfor %}
</main>
<!-- POPUP SEGNALAZIONE -->
<div id="segnalaPopup" class="modal">
    <div class="modal-content">
        <h3>Segnala post</h3>
        <p>Inserisci la motivazione della segnalazione</p>

        <form id="segnalaForm" method="post">
            <textarea name="motivo"
                      placeholder="Motivazione"
                      required></textarea>

            <button type="submit" class="segnala">Invia segnalazione</button>
            <button type="button" class="Annulla" onclick="closeSegnalaPopup()">Annulla</button>
        </form>
    </div>
</div>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>